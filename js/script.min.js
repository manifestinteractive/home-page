var settings={},cookie=$.cookie("homepage_settings"),fullscreen=!1,hide_menu=null,timeout=1E4,use_ios7_bg_animate=!0,use_keyboard_shortcuts=!0;cookie&&(""!==cookie&&"{}"!==cookie)&&(window.settings=JSON.parse($.cookie("homepage_settings")));
function browser_geolocation(a){try{google||(google=0)}catch(b){google=0}if(navigator.geolocation)navigator.geolocation.getCurrentPosition(function(b){zip_from_latlng(b.coords.latitude,b.coords.longitude,a)});else if(google&&google.gears){var c=google.gears.factory.create("beta.geolocation");c.getPermission();c.getCurrentPosition(function(b){zip_from_latlng(b.latitude,b.longitude,a)},function(){})}}
function zip_from_latlng(a,b,c){var d=document.createElement("script");d.src="http://ws.geonames.org/findNearbyPostalCodesJSON?lat="+a+"&lng="+b+"&callback="+c;document.getElementsByTagName("head")[0].appendChild(d)}
function fetch_geolcation(a){window.settings.geolocation={zip:a.postalCodes[0].postalCode,country:a.postalCodes[0].countryCode,state:a.postalCodes[0].adminName1,county:a.postalCodes[0].adminName2,place:a.postalCodes[0].placeName,lat:a.postalCodes[0].lat,lng:a.postalCodes[0].lng};$.cookie("homepage_settings",JSON.stringify(window.settings));setTimeout(load_data,500)}
function launch_fullscreen(){document.documentElement.requestFullScreen?document.documentElement.requestFullScreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():document.documentElement.webkitRequestFullScreen&&document.documentElement.webkitRequestFullScreen(document.body.ALLOW_KEYBOARD_INPUT);window.fullscreen=!0}
function cancel_fullscreen(){document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen();window.fullscreen=!1}
function start_time(){var a=new Date,b=a.getHours(),c=a.getMinutes(),a=a.getSeconds(),d="AM";12<b&&(b-=12,d="PM");10>c&&(c="0"+c);10>a&&(a="0"+a);$(".clock").html('<i class="icon-time"></i>&nbsp; '+b+"<span>:</span>"+c+"<span>:</span>"+a+" "+d);setTimeout(start_time,1E3)}
function load_data(){$.simpleWeather({zipcode:window.settings.geolocation.zip,location:"",unit:"f",success:function(a){html='<img class="nobounce" src="'+a.image+'" width="250" height="180"><h2 class="nobounce">'+a.temp+"&deg;"+a.units.temp+'</h2><ul class="nobounce"><li class="nobounce">'+a.currently+'</li><li class="nobounce"><i class="icon-angle-up"></i> '+a.high+'&deg;&nbsp; <i class="icon-angle-down"></i> '+a.low+'&deg;</li><li class="nobounce optional hidden-phone"><i class="icon-location-arrow"></i> '+
a.wind.speed+" "+a.wind.direction+"</li></ul>";$(".weather").html(html)},error:function(a){$(".weather").html("<p>"+a+"</p>")}});$(".content .google").rssfeed("http://gplusrss.com/rss/feed/b9285465a5642f024e4365dfc45325b0525ebdeb5af94",{limit:20,header:!1,linktarget:"_blank"});$(".content .github").rssfeed("https://github.com/manifestinteractive.private.atom?token=425e6ccb6c7d8d744dc93dafbcc09891",{limit:20,header:!1,linktarget:"_blank"});$(".content .linkedin").rssfeed("http://www.linkedin.com/rss/nus?key=SpbPKdYV0LKuR6wFHp8xD8YntSPi8PuJ6YLtf_SCZseKVcFounB0LYncptA9ubPew3",
{limit:20,header:!1,linktarget:"_blank"});$(".content .twitter").rssfeed("http://home.peterschmalfeldt.com/tweetledee/homerss.php",{limit:20,header:!1,linktarget:"_blank"});$(".content .newsfeed").rssfeed("http://feeds.theguardian.com/theguardian/technology/rss",{limit:20,header:!1,linktarget:"_blank"})}
function orientation_changed(a){var b=a.beta,c=a.gamma;if(null!==window.orientation){var d=window.orientation;-90===d?(b=a.gamma,c=-1*a.beta):90===d?(b=-1*a.gamma,c=a.beta):180===d&&(b=-1*a.beta,c=-1*a.gamma)}a=Math.tan(c*(Math.PI/180));b=Math.tan((b-45)*(Math.PI/180));a=Math.ceil(-15*a)-50;b=Math.ceil(-15*b)-50;$("body").css({"background-position-x":a+"px","background-position-y":b+"px","background-size":"auto 125%","-webkit-transform":"translate3d(0,0,0)","-moz-transform":"translate3d(0,0,0)","-ms-transform":"translate3d(0,0,0)",
"-o-transform":"translate3d(0,0,0)",transform:"translate3d(0,0,0)","-webkit-transition":"all .1s ease-out","-moz-transition":"all .1s ease-out","-ms-transition":"all .1s ease-out","-o-transition":"all .1s ease-out",transition:"all .1s ease-out"})}
$(document).ready(function(){"undefined"===typeof window.settings.geolocation&&browser_geolocation("fetch_geolcation");/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?($(".fade-container").css({"overflow-y":"auto"}),$(".refresh").css({right:"58px"}),$(".toggle-fullscreen").hide(),window.use_ios7_bg_animate&&/iPhone|iPad|iPod/i.test(navigator.userAgent)&&window.addEventListener("deviceorientation",orientation_changed,!1)):($("a").tooltip(),setTimeout(function(){window.scrollTo(0,
1)},0),window.addEventListener("orientationchange",function(){window.scrollTo(0,1)},!1));$(".toggle-fullscreen").click(function(){window.fullscreen?cancel_fullscreen():launch_fullscreen();return!1});$(".menu-list").click(function(){$(".submenu").fadeToggle("slow");hide_menu=setTimeout(function(){$(".submenu").fadeOut("slow")},window.timeout);return!1});$(".refresh").click(function(){load_data();$(".refresh").addClass("spin");setTimeout(function(){$(".refresh").removeClass("spin")},1E3);return!1});
$(".submenu a").hover(function(){clearTimeout(hide_menu);hide_menu=setTimeout(function(){$(".submenu").fadeOut("slow")},window.timeout)});$(".submenu a").click(function(){clearTimeout(hide_menu);hide_menu=setTimeout(function(){$(".submenu").fadeOut("slow")},window.timeout);$(".submenu a").not(this).removeClass("active");$(this).toggleClass("active");var a=$(this).attr("class"),a=a.replace("active",""),a=a.replace("nobounce",""),a="."+a.replace(" ","");$(".fade-container").not(a).stop().hide();$(".content .close").hide();
$(this).hasClass("active")?($(a,".content").stop().fadeIn("fast").removeClass("blur").css({display:"inline-block"}),$(".content .close").fadeIn("slow"),$(".content .close").css({left:$(".content .fade-container:visible").width()+45+"px"})):($(a,".content").stop().addClass("blur").fadeOut("fast"),$(".content .close").fadeOut("slow"));return!1});$(".content .close").click(function(){$(".submenu a").removeClass("active");$(".content .fade-container").stop().addClass("blur").fadeOut("fast");$(".content .close").stop().hide();
return!1});$(".fade-container").css({height:$(document).height()-200+"px"});$(".fade-container").bind("mousewheel",function(a,b){this.scrollTop+=30*(0>b?1:-1);a.stopPropagation();a.preventDefault()});$(window).resize(function(){$(".fade-container").css({height:$(document).height()-200+"px"});$(".content .close").css({left:$(".content .fade-container:visible").width()+45+"px"});window.scrollTo(0,1)});use_keyboard_shortcuts&&(Mousetrap.bind("1",function(){$(".submenu a.bookmarks").trigger("click")}),
Mousetrap.bind("2",function(){$(".submenu a.google").trigger("click")}),Mousetrap.bind("3",function(){$(".submenu a.github").trigger("click")}),Mousetrap.bind("4",function(){$(".submenu a.linkedin").trigger("click")}),Mousetrap.bind("5",function(){$(".submenu a.twitter").trigger("click")}),Mousetrap.bind("6",function(){$(".submenu a.newsfeed").trigger("click")}),Mousetrap.bind("r",function(){$(".refresh").trigger("click")}),Mousetrap.bind("f",function(){$(".toggle-fullscreen").trigger("click")}),
Mousetrap.bind("m",function(){$(".menu-list").trigger("click")}));setInterval(load_data,6E4);setTimeout(load_data,500);start_time()});
